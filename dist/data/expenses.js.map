{"version":3,"sources":["../../src/data/expenses.js"],"names":["ExpenseController","getExpense","id","expense","models","Expense","findOne","where","getAllExpenses","token","user","userId","expenses","findAll","createExpense","type","quantity","price","Error","create","deleteExpense","deleted","destroy","returning","updateExpense","rest","updated","update"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,iBAAN,CAAwB;AACtB,eAAaC,UAAb,CAAwBC,EAAxB,EAA4B;AAC1B,UAAMC,OAAO,GAAG,MAAMC,gBAAOC,OAAP,CAAeC,OAAf,CAAuB;AAC3CC,MAAAA,KAAK,EAAE;AAAEL,QAAAA;AAAF;AADoC,KAAvB,CAAtB;AAGA,WAAOC,OAAP;AACD;;AACD,eAAaK,cAAb,CAA4BC,KAA5B,EAAmC;AACjC,UAAMC,IAAI,GAAG,MAAM,iCAAYD,KAAZ,CAAnB;AACA,UAAM;AAAEP,MAAAA,EAAE,EAAES;AAAN,QAAiBD,IAAvB;AACA,UAAME,QAAQ,GAAG,MAAMR,gBAAOC,OAAP,CAAeQ,OAAf,CAAuB;AAAEN,MAAAA,KAAK,EAAE;AAAEI,QAAAA;AAAF;AAAT,KAAvB,CAAvB;AACA,WAAOC,QAAP;AACD;;AAED,eAAaE,aAAb,CAA2BC,IAA3B,EAAiCC,QAAjC,EAA2CC,KAA3C,EAAkDR,KAAlD,EAAyD;AACvD,UAAMC,IAAI,GAAG,MAAM,iCAAYD,KAAZ,CAAnB;AACA,QAAI,CAACC,IAAL,EAAW,MAAM,IAAIQ,KAAJ,CAAU,yBAAV,CAAN;AACX,UAAM;AAAEhB,MAAAA,EAAE,EAAES;AAAN,QAAiBD,IAAvB;AACA,WAAON,gBAAOC,OAAP,CAAec,MAAf,CAAsB;AAC3BJ,MAAAA,IAD2B;AAE3BC,MAAAA,QAF2B;AAG3BC,MAAAA,KAH2B;AAI3BN,MAAAA;AAJ2B,KAAtB,CAAP;AAMD;;AACD,eAAaS,aAAb,CAA2BlB,EAA3B,EAA+BO,KAA/B,EAAsC;AACpC,UAAMC,IAAI,GAAG,MAAM,iCAAYD,KAAZ,CAAnB;AACA,QAAI,CAACC,IAAL,EAAW,MAAM,IAAIQ,KAAJ,CAAU,yBAAV,CAAN;AACX,UAAM;AAAEhB,MAAAA,EAAE,EAAES;AAAN,QAAiBD,IAAvB;AACA,UAAMW,OAAO,GAAG,MAAMjB,gBAAOC,OAAP,CAAeiB,OAAf,CAAuB;AAC3Cf,MAAAA,KAAK,EAAE;AAAEL,QAAAA,EAAF;AAAMS,QAAAA;AAAN,OADoC;AAE3CY,MAAAA,SAAS,EAAE;AAFgC,KAAvB,CAAtB;AAIA,WAAOF,OAAP;AACD;;AAED,eAAaG,aAAb,CAA2BtB,EAA3B,EAA+BuB,IAA/B,EAAqChB,KAArC,EAA4C;AAC1C,UAAMC,IAAI,GAAG,MAAM,iCAAYD,KAAZ,CAAnB;AACA,QAAI,CAACC,IAAL,EAAW,MAAM,IAAIQ,KAAJ,CAAU,yBAAV,CAAN;AACX,UAAM;AAAEhB,MAAAA,EAAE,EAAES;AAAN,QAAiBD,IAAvB;AACA,UAAMgB,OAAO,GAAG,MAAMtB,gBAAOC,OAAP,CAAesB,MAAf,CAAsBF,IAAtB,EAA4B;AAChDlB,MAAAA,KAAK,EAAE;AAAEL,QAAAA,EAAF;AAAMS,QAAAA;AAAN,OADyC;AAEhDY,MAAAA,SAAS,EAAE;AAFqC,KAA5B,CAAtB;AAIA,WAAOG,OAAO,CAAC,CAAD,CAAP,CAAW,CAAX,CAAP;AACD;;AA7CqB;;eAgDT1B,iB","sourcesContent":["import models from \"../../models\";\nimport { decodeToken } from \"../helpers/authentication\";\n\nclass ExpenseController {\n  static async getExpense(id) {\n    const expense = await models.Expense.findOne({\n      where: { id }\n    });\n    return expense;\n  }\n  static async getAllExpenses(token) {\n    const user = await decodeToken(token);\n    const { id: userId } = user;\n    const expenses = await models.Expense.findAll({ where: { userId } });\n    return expenses;\n  }\n\n  static async createExpense(type, quantity, price, token) {\n    const user = await decodeToken(token);\n    if (!user) throw new Error(\"You should be logged in\");\n    const { id: userId } = user;\n    return models.Expense.create({\n      type,\n      quantity,\n      price,\n      userId\n    });\n  }\n  static async deleteExpense(id, token) {\n    const user = await decodeToken(token);\n    if (!user) throw new Error(\"You should be logged in\");\n    const { id: userId } = user;\n    const deleted = await models.Expense.destroy({\n      where: { id, userId },\n      returning: true\n    });\n    return deleted;\n  }\n\n  static async updateExpense(id, rest, token) {\n    const user = await decodeToken(token);\n    if (!user) throw new Error(\"You should be logged in\");\n    const { id: userId } = user;\n    const updated = await models.Expense.update(rest, {\n      where: { id, userId },\n      returning: true\n    });\n    return updated[1][0];\n  }\n}\n\nexport default ExpenseController;\n"],"file":"expenses.js"}